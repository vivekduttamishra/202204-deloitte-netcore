using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;

namespace ConceptArchitect.BookManagement
{
    public class InMemoryBookService : IBookService
    {
        Dictionary<string, Book> books;
        public InMemoryBookService()
        {
            Book[] _books =
            {
               new Book
               {
                   Isbn = "12233",
                   Title= "The Accursed God",
                   Author = new Author()
                   {
                        Name="Vivek Dutta Mishra",
                        Photo="https://avatars.githubusercontent.com/u/9464908?v=4",
                        Biography="Author of Amazon #1 Best seller The Accursed God"
                   },
                   Cover="data:image/jpeg;base64,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",
                   Description="Author of Amazon #1 Best seller The Accursed God",
                   Price=199,
                   Rating=4.0,
                   Tags = new List<string>(){ }
               }
            };

            books = new Dictionary<string, Book>();
            var task = AddAll(_books);

        }

        private async Task AddAll(Book[] _books)
        {
            foreach (var book in _books)
                await AddBook(book);
        }

        public async Task AddBook(Book book)
        {
            await Task.Yield();
            if (string.IsNullOrEmpty(book.Title))
            {
                book.Title = book.Title.ToLower().Replace(" ", "-");
            }

            books[book.Title] = book;
        }

        public async Task<IList<Book>> GetAllBooks()
        {
            await Task.Yield();
            return books.Values.ToList();
        }

        public async Task<Book> GetBookByTitle(string title)
        {
            await Task.Yield();
            if (books.ContainsKey(title))
                return books[title];
            else
                return null;
        }
    }
}
